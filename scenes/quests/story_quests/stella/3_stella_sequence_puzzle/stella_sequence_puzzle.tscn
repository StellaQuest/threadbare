[gd_scene load_steps=25 format=4 uid="uid://b7j5em2h1m2j7"]

[ext_resource type="TileSet" uid="uid://07fq3rspk8ia" path="res://scenes/tileset.tres" id="1_t0r7n"]
[ext_resource type="Texture2D" path="res://scenes/quests/story_quests/stella/3_stella_sequence_puzzle/stella_sequence_components/stella_tortoise.png" id="2_iwkby"]
[ext_resource type="PackedScene" uid="uid://iu2q66clupc6" path="res://scenes/game_elements/characters/player/player.tscn" id="2_sl1lr"]
[ext_resource type="Script" uid="uid://c68oh8dtr21ti" path="res://scenes/game_logic/sequence_puzzle.gd" id="3_an7xq"]
[ext_resource type="SpriteFrames" uid="uid://bkb0lid80r1uc" path="res://scenes/quests/story_quests/stella/stella_player_components/stella_player.tres" id="3_r0gok"]
[ext_resource type="PackedScene" uid="uid://b8sok264erfoc" path="res://scenes/game_elements/props/sequence_puzzle_object/sequence_puzzle_object.tscn" id="4_0jvpl"]
[ext_resource type="AudioStream" uid="uid://cg57q82pb243w" path="res://assets/third_party/xylophone-sampler-pack/xylophone-c3.ogg" id="5_5dvt4"]
[ext_resource type="AudioStream" uid="uid://b83x8h0ob5mpq" path="res://assets/third_party/xylophone-sampler-pack/xylophone-d3.ogg" id="6_hpvon"]
[ext_resource type="AudioStream" uid="uid://cmtiwg2cylmts" path="res://assets/third_party/xylophone-sampler-pack/xylophone-e3.ogg" id="7_7j3ho"]
[ext_resource type="AudioStream" uid="uid://8k1hyi4gjae4" path="res://assets/third_party/xylophone-sampler-pack/xylophone-f3.ogg" id="8_3wcwk"]
[ext_resource type="AudioStream" uid="uid://6oahn2ucxxjv" path="res://assets/third_party/xylophone-sampler-pack/xylophone-g3.ogg" id="9_j0pu7"]
[ext_resource type="AudioStream" uid="uid://bdboi4ndapqec" path="res://assets/third_party/xylophone-sampler-pack/xylophone-a3.ogg" id="10_6pn5k"]
[ext_resource type="PackedScene" uid="uid://be4o3ythda4cu" path="res://scenes/game_elements/props/sequence_puzzle_hint_sign/sequence_puzzle_hint_sign.tscn" id="11_c8urv"]
[ext_resource type="SpriteFrames" uid="uid://bhcgkxhy4cqf4" path="res://scenes/quests/story_quests/template/3_template_sequence_puzzle/template_sign_2.tres" id="12_84peh"]
[ext_resource type="Script" uid="uid://ccc78coj2b1li" path="res://scenes/game_logic/sequence_puzzle_step.gd" id="13_cyoxr"]
[ext_resource type="PackedScene" uid="uid://fuhl3l6gxq5k" path="res://scenes/game_elements/props/collectible_item/collectible_item.tscn" id="14_edmpl"]
[ext_resource type="Script" uid="uid://bgmwplmj3bfls" path="res://scenes/globals/game_state/inventory/inventory_item.gd" id="15_2p35u"]
[ext_resource type="Resource" uid="uid://bb1g8ftnxjhvh" path="res://scenes/quests/story_quests/template/3_template_sequence_puzzle/template_sequence_puzzle.dialogue" id="16_fk71d"]
[ext_resource type="PackedScene" uid="uid://covsdqqsd6rsy" path="res://scenes/game_elements/props/sign/sign.tscn" id="17_gcx3r"]
[ext_resource type="PackedScene" uid="uid://cfcgrfvtn04yp" path="res://scenes/ui_elements/hud/hud.tscn" id="18_w255e"]
[ext_resource type="PackedScene" uid="uid://ipvcfv2g0oi1" path="res://scenes/game_elements/characters/npcs/talker/talker.tscn" id="19_iwkby"]
[ext_resource type="Script" uid="uid://x1mxt6bmei2o" path="res://scenes/ui_elements/cinematic/cinematic.gd" id="19_mt5a1"]
[ext_resource type="SpriteFrames" path="res://scenes/quests/story_quests/stella/3_stella_sequence_puzzle/stella_sequence_components/stella_guardian.tres" id="20_tvr0v"]

[sub_resource type="Resource" id="Resource_u8qfb"]
script = ExtResource("15_2p35u")
name = ""
type = 2
metadata/_custom_type_script = "uid://bgmwplmj3bfls"

[node name="SequencePuzzleTemplate" type="Node2D"]

[node name="TileMapLayers" type="Node2D" parent="."]

[node name="Sand" type="TileMapLayer" parent="TileMapLayers"]
tile_map_data = PackedByteArray("AAD//wcAAQAGAAEAAAAAAAcAAQAGAAEAAAABAAcAAQAGAAEAAAACAAcAAQAGAAEAAAADAAcAAQAGAAEAAAADAAYAAQAGAAEAAAADAAUAAQAGAAEAAAAEAAUAAQAGAAEAAAAFAAUAAQAGAAEAAAAGAAUAAQAGAAEAAAAHAAUAAQAGAAEAAAAIAAUAAQAGAAEAAAAJAAUAAQAGAAEAAAAKAAUAAQAGAAEAAAALAAUAAQAGAAEAAAALAAQAAQAGAAEAAAAMAAQAAQAGAAEAAAANAAQAAQAGAAEAAAAOAAQAAQAGAAEAAAAPAAQAAQAHAAEAAAD//wAAAQAGAAEAAAAAAAAAAQAGAAEAAAABAAAAAQAGAAEAAAACAAAAAQAGAAEAAAADAAAAAQAGAAEAAAAEAAAAAQAGAAEAAAAFAAAAAQAGAAEAAAAFAAEAAQAGAAEAAAAEAAEAAQAGAAEAAAAAAAEAAQAGAAEAAAD//wEAAQAGAAEAAAD//wIAAQAGAAEAAAD//wQAAQAGAAEAAAD//wUAAQAGAAEAAAD//wYAAQAGAAEAAAAAAAYAAQAGAAEAAAABAAYAAQAGAAEAAAACAAYAAQAGAAEAAAACAAUAAQAGAAEAAAACAAQAAQAGAAEAAAABAAQAAQAGAAEAAAABAAUAAQAGAAEAAAAAAAUAAQAGAAEAAAAAAAQAAQAGAAEAAAAAAAIAAQAGAAEAAAACAAMAAQAGAAEAAAACAAIAAQAGAAEAAAADAAIAAQAGAAEAAAADAAMAAQAGAAEAAAADAAQAAQAGAAEAAAAEAAQAAQAGAAEAAAAEAAMAAQAGAAEAAAAEAAIAAQAGAAEAAAAFAAIAAQAGAAEAAAAFAAMAAQAGAAEAAAAFAAQAAQAGAAEAAAAGAAQAAQAGAAEAAAAHAAQAAQAGAAEAAAAHAAMAAQAGAAEAAAAGAAMAAQAGAAEAAAAGAAIAAQAGAAEAAAAGAAEAAQAGAAEAAAAGAAAAAQAGAAEAAAAHAAAAAQAGAAEAAAAIAAAAAQAGAAEAAAAJAAAAAQAGAAEAAAAIAAEAAQAGAAEAAAAIAAIAAQAGAAEAAAAHAAIAAQAGAAEAAAAHAAEAAQAGAAEAAAAJAAEAAQAGAAEAAAAJAAIAAQAGAAEAAAAJAAMAAQAGAAEAAAAIAAMAAQAGAAEAAAAIAAQAAQAGAAEAAAAJAAQAAQAGAAEAAAAKAAQAAQAGAAEAAAALAAMAAQAGAAEAAAALAAIAAQAGAAEAAAALAAEAAQAGAAEAAAAKAAIAAQAGAAEAAAAKAAMAAQAGAAEAAAAKAAEAAQAGAAEAAAAKAAAAAQAGAAEAAAALAAAAAQAGAAEAAAAMAAAAAQAGAAEAAAANAAAAAQAGAAEAAAANAAEAAQAGAAEAAAAMAAEAAQAGAAEAAAAMAAIAAQAGAAEAAAAMAAMAAQAGAAEAAAANAAMAAQAGAAEAAAAOAAMAAQAGAAEAAAAPAAMAAQAHAAEAAAAPAAIAAQAHAAEAAAAOAAIAAQAGAAEAAAAOAAEAAQAGAAEAAAANAAIAAQAGAAEAAAAOAAAAAQAGAAEAAAAPAAAAAQAHAAEAAAAPAAEAAQAHAAEAAAD+////AQAFAAAAAAD/////AQAGAAAAAAABAP//AQAGAAAAAAACAP//AQAGAAAAAAAAAP//AQAGAAAAAAD+/wAAAQAFAAEAAAD+/wEAAQAFAAEAAAD+/wIAAQAFAAEAAAD+/wQAAQAFAAEAAAD+/wUAAQAFAAEAAAD+/wYAAQAFAAEAAAD+/wcAAQAFAAEAAAD//wgAAQAGAAIAAAD+/wgAAQAFAAIAAAAAAAgAAQAGAAIAAAABAAgAAQAGAAIAAAACAAgAAQAGAAIAAAADAAgAAQAGAAIAAAAEAAgAAQAGAAIAAAAFAAgAAQAGAAIAAAAGAAgAAQAGAAIAAAAHAAgAAQAGAAIAAAAIAAgAAQAGAAIAAAAJAAgAAQAGAAIAAAAKAAgAAQAGAAIAAAALAAgAAQAGAAIAAAAMAAgAAQAGAAIAAAANAAgAAQAGAAIAAAAOAAgAAQAGAAIAAAAOAAcAAQAGAAEAAAAOAAYAAQAGAAEAAAAOAAUAAQAGAAEAAAAPAAUAAQAHAAEAAAAPAAYAAQAHAAEAAAAPAAcAAQAHAAEAAAAPAAgAAQAHAAIAAAAEAAcAAQAGAAEAAAAEAAYAAQAGAAEAAAAFAAYAAQAGAAEAAAAFAAcAAQAGAAEAAAAGAAYAAQAGAAEAAAAGAAcAAQAGAAEAAAAHAAYAAQAGAAEAAAAHAAcAAQAGAAEAAAAIAAYAAQAGAAEAAAAIAAcAAQAGAAEAAAAJAAYAAQAGAAEAAAAJAAcAAQAGAAEAAAAKAAYAAQAGAAEAAAAKAAcAAQAGAAEAAAALAAYAAQAGAAEAAAALAAcAAQAGAAEAAAAMAAYAAQAGAAEAAAAMAAUAAQAGAAEAAAAMAAcAAQAGAAEAAAANAAcAAQAGAAEAAAANAAYAAQAGAAEAAAANAAUAAQAGAAEAAAADAP//AQAGAAAAAAAEAP//AQAGAAAAAAAFAP//AQAGAAAAAAAGAP//AQAGAAAAAAAHAP//AQAGAAAAAAAIAP//AQAGAAAAAAAJAP//AQAGAAAAAAAKAP//AQAGAAAAAAALAP//AQAGAAAAAAAMAP//AQAGAAAAAAANAP//AQAGAAAAAAAOAP//AQAGAAAAAAAPAP//AQAHAAAAAAD+/wMAAQAFAAEAAAD//wMAAQAGAAEAAAAAAAMAAQAGAAEAAAABAAMAAQAGAAEAAAABAAIAAQAGAAEAAAABAAEAAQAGAAEAAAACAAEAAQAGAAEAAAADAAEAAQAGAAEAAAA=")
tile_set = ExtResource("1_t0r7n")

[node name="Dirt" type="TileMapLayer" parent="TileMapLayers"]
tile_map_data = PackedByteArray("AAAEAAEABgAAAAAAAAAFAAEABgABAAAAAAAGAAEABgABAAAAAAAHAAEABgACAAAAAAAHAAIABgACAAEAAAAHAAMABgACAAEAAAAHAAQABgABAAEAAAAHAAUABgAAAAIAAAAIAAUABgABAAIAAAAJAAUABgABAAMAAAAKAAUABgABAAEAAAAKAAYABgAAAAEAAAAKAAcABgABAAEAAAAKAAgABgABAAIAAAALAAgABgABAAIAAAAMAAgABgABAAIAAAANAAgABgABAAIAAAAOAAgABgABAAIAAAAPAAgABgACAAIAAAAPAAcABgACAAEAAAAPAAYABgACAAEAAAAPAAUABgACAAEAAAAOAAUABgABAAEAAAANAAUABgABAAEAAAAMAAUABgABAAEAAAALAAUABgABAAEAAAALAAYABgABAAEAAAALAAcABgABAAEAAAAMAAYABgABAAEAAAAMAAcABgABAAEAAAANAAcABgABAAEAAAANAAYABgABAAEAAAAOAAYABgABAAEAAAAOAAcABgABAAEAAAAKAAQABgAAAAAAAAALAAQABgABAAAAAAAMAAQABgABAAAAAAANAAQABgABAAEAAAAOAAQABgABAAEAAAAPAAQABgACAAEAAAD+/wYABgAAAAAAAAD//wYABgABAAAAAAAAAAYABgABAAAAAAABAAYABgABAAEAAAACAAYABgABAAIAAAACAAUABgABAAEAAAACAAQABgAAAAEAAAACAAMABgAAAAAAAAADAAMABgABAAAAAAAEAAMABgABAAEAAAAEAAIABgAAAAEAAAAFAAIABgABAAEAAAAGAAIABgABAAEAAAAGAAMABgABAAEAAAAFAAMABgABAAIAAAAGAAQABgAAAAIAAAADAAQABgABAAEAAAAEAAQABgACAAIAAAADAAYABgACAAIAAAADAAUABgACAAEAAAABAAUABgAAAAAAAAABAAcABgACAAIAAAAAAAcABgABAAIAAAD//wcABgABAAIAAAD+/wcABgAAAAIAAAAIAAQABgACAAAAAAAJAAcABgAAAAAAAAAJAAgABgAAAAIAAAANAAMABgAAAAAAAAAOAAMABgABAAAAAAAPAAMABgACAAEAAAAPAAIABgADAAAAAAA=")
tile_set = ExtResource("1_t0r7n")

[node name="OnTheGround" type="Node2D" parent="."]
y_sort_enabled = true

[node name="Sprite2D" type="Sprite2D" parent="OnTheGround"]
position = Vector2(821, 409)
scale = Vector2(2.1, 2.1)
texture = ExtResource("2_iwkby")

[node name="Player" parent="OnTheGround" instance=ExtResource("2_sl1lr")]
position = Vector2(60, 471)
sprite_frames = ExtResource("3_r0gok")

[node name="SequencePuzzle" type="Node2D" parent="OnTheGround" node_paths=PackedStringArray("steps")]
y_sort_enabled = true
position = Vector2(-1, 0)
script = ExtResource("3_an7xq")
steps = [NodePath("Steps/SequencePuzzleStep1"), NodePath("Steps/SequencePuzzleStep2")]
metadata/_custom_type_script = "uid://c68oh8dtr21ti"

[node name="Objects" type="Node2D" parent="OnTheGround/SequencePuzzle"]
y_sort_enabled = true
position = Vector2(356, 453)

[node name="Blue" parent="OnTheGround/SequencePuzzle/Objects" instance=ExtResource("4_0jvpl")]
modulate = Color(0, 0.4, 0.6, 1)
position = Vector2(254, -34)
audio_stream = ExtResource("5_5dvt4")

[node name="Pink" parent="OnTheGround/SequencePuzzle/Objects" instance=ExtResource("4_0jvpl")]
modulate = Color(0.89, 0.2937, 0.804817, 1)
position = Vector2(304, -27)
audio_stream = ExtResource("6_hpvon")

[node name="Yellow" parent="OnTheGround/SequencePuzzle/Objects" instance=ExtResource("4_0jvpl")]
modulate = Color(0.89, 0.804817, 0.2937, 1)
position = Vector2(145, 25)
audio_stream = ExtResource("7_7j3ho")

[node name="Green" parent="OnTheGround/SequencePuzzle/Objects" instance=ExtResource("4_0jvpl")]
modulate = Color(0.188235, 0.717647, 0, 1)
position = Vector2(219, 19)
audio_stream = ExtResource("8_3wcwk")

[node name="Purple" parent="OnTheGround/SequencePuzzle/Objects" instance=ExtResource("4_0jvpl")]
modulate = Color(0.464066, 0.2937, 0.89, 1)
position = Vector2(274, 34)
audio_stream = ExtResource("9_j0pu7")

[node name="Red" parent="OnTheGround/SequencePuzzle/Objects" instance=ExtResource("4_0jvpl")]
modulate = Color(0.89, 0.2937, 0.2937, 1)
position = Vector2(185, -33)
audio_stream = ExtResource("10_6pn5k")

[node name="Signs" type="Node2D" parent="OnTheGround/SequencePuzzle"]
y_sort_enabled = true

[node name="HintSign1" parent="OnTheGround/SequencePuzzle/Signs" instance=ExtResource("11_c8urv")]
position = Vector2(417, 353)

[node name="HintSign2" parent="OnTheGround/SequencePuzzle/Signs" instance=ExtResource("11_c8urv")]
position = Vector2(609, 261)
sprite_frames = ExtResource("12_84peh")

[node name="Steps" type="Node2D" parent="OnTheGround/SequencePuzzle"]

[node name="SequencePuzzleStep1" type="Node2D" parent="OnTheGround/SequencePuzzle/Steps" node_paths=PackedStringArray("sequence", "hint_sign")]
script = ExtResource("13_cyoxr")
sequence = [NodePath("../../Objects/Yellow"), NodePath("../../Objects/Green"), NodePath("../../Objects/Blue")]
hint_sign = NodePath("../../Signs/HintSign1")

[node name="SequencePuzzleStep2" type="Node2D" parent="OnTheGround/SequencePuzzle/Steps" node_paths=PackedStringArray("sequence", "hint_sign")]
script = ExtResource("13_cyoxr")
sequence = [NodePath("../../Objects/Blue"), NodePath("../../Objects/Green"), NodePath("../../Objects/Yellow"), NodePath("../../Objects/Green")]
hint_sign = NodePath("../../Signs/HintSign2")

[node name="CollectibleItem" parent="OnTheGround" instance=ExtResource("14_edmpl")]
position = Vector2(861, 282)
revealed = false
next_scene = "uid://cqjdjcwwfg0xi"
item = SubResource("Resource_u8qfb")
collected_dialogue = ExtResource("16_fk71d")
dialogue_title = &"well_done"

[node name="Sign" parent="OnTheGround" instance=ExtResource("17_gcx3r")]
position = Vector2(285, 341)
direction = 1
text = "First melody: yellow, green, blue."

[node name="Talker" parent="OnTheGround" instance=ExtResource("19_iwkby")]
position = Vector2(465, 132)
scale = Vector2(1.3, 1.3)
sprite_frames = ExtResource("20_tvr0v")

[node name="ScreenOverlay" type="CanvasLayer" parent="."]

[node name="HUD" parent="." instance=ExtResource("18_w255e")]

[node name="Camera2D" type="Camera2D" parent="."]
anchor_mode = 0
zoom = Vector2(2, 2)
position_smoothing_enabled = true

[node name="Cinematic" type="Node2D" parent="."]
script = ExtResource("19_mt5a1")
dialogue = ExtResource("16_fk71d")
metadata/_custom_type_script = "uid://x1mxt6bmei2o"

[connection signal="solved" from="OnTheGround/SequencePuzzle" to="OnTheGround/CollectibleItem" method="reveal"]
